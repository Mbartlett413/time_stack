
<ul class="tabs" data-tab style="margin: 0 0 0 33%;">
  <li class="tab-title active"><a href="#user_permissions">User Permissions</a></li>
  <li class="tab-title"><a href="#holidays">Holidays</a></li>
  <li class="tab-title"><a href="#panel3">Report Logo</a></li>
  <li class="tab-title"><a href="#panel4">Tab 4</a></li>
 </ul>
<div class="tabs-content">
	<div class="content active" id="user_permissions">
	  <%= form_tag users_path, method: :update do %>
		<table>
			<thead>
				<th>Username</th>
				<th>User?</th>
				<th>PM?</th>
				<th>CM?</th>
				<th>Admin?</th>
				<th>Proxy?</th>
			</thead>
			<tbody>
			 
				  <% @users.each do |u| %>
				   <%= fields_for "user[]", u do |uu|%>
					<tr>
						<td> <%= u.first_name %> <%= u.last_name %> </td>
						<td><%= uu.check_box :user %></td>
						<td><%= uu.check_box :pm %></td>
						<td><%= uu.check_box :cm %></td>
						<td><%= uu.check_box :admin %></td>
						<td><%= uu.check_box :proxy %></td>
						
				    </tr>
				   <% end %>
				  <% end %>
				
			  
			</tbody>
		</table>
		<div style="margin-left: 47%">
		   <%= submit_tag "Submit"%>
	      <% end %>
	    </div>

<table>
  <thead>
    <tr>
      <th>
        <h2>Invite Customer Manager</h2>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>
        <%= form_tag(action: :invite_customer) do %>
          <%= text_field_tag :email, nil, placeholder: "Email", class: "invitation_email" %>
          <%= date_field_tag 'invite_start_date', params[:invite_start_date], {placeholder: "Select start date", required: "required"} %>
          <%= select_tag :customer_id, options_from_collection_for_select(@customers, :id, :name)%>
          <%= hidden_field_tag :invited_by_id, current_user.id %>

          <%= submit_tag 'Invite Customer Manager', class: 'btn-primary invite_user_button' %>
        <% end %>
      </th>
    </tr>
  </tbody>
</table>
<h1> Pending Users</h1>
<table>
  <thead>
    <tr>
      <th> User Email</th>
      <th> Invitation Sent At</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @invited_users.each do |user| %>
      <% if user.invitation_accepted_at.nil? %>
        <tr>
          <td>
            <%= user.email %></td>
          <td>
            <%= user.invitation_sent_at %></td>
          <td>
            <%= button_to "Resend Invitation","/invitation/resend_invite?email=#{user.email}&invited_by_id=#{user.invited_by_id}", class: "secondary tiny" %></td>
  		</tr>
  	  <% end %>
  	<% end %>
  </tbody>
</table>
	</div>
	<div class="content row" id="holidays">
		<div class="small-6 small-offset-3">
			<h1 class="text-center">Holidays Setup</h1>
			<% if @holidays.any? %>
			<div class="row">
				<h4 class="small-4 columns text-center underline" style="text-decoration:underline; margin: 5px; margin-left: 20%;">Name</h4>
				<h4 class="small-4 columns text-center underline" style="text-decoration:underline; margin: 5px;">Date</h4>
				<h4 class="small-4 columns text-center"></h4>
			</div>
				<% @holidays.each do |h| %>
					<div class="small-4 columns text-center" style="margin-left:15%;"><%= h.name %></div>
					<div class="small-4 columns text-center"><%= h.date.strftime("%m-%d-%y") %></div>
					<div class="button small" style="margin-left: 20%;"><%= link_to "Delete Holiday", h, method: :delete, data: { confirm: 'Are you sure?' }, style: "color:#842929" %></div>
				<% end %>
			<% else %>
				<h3 class="text-center">No Holidays created</h3>
			<% end %>
			
			<%= link_to "Create Global Holiday", new_holiday_path, class: "button small", style: "margin-top:30px; margin-left: 20%;"%>
		</div>
	</div>
	<div class="report-log-tab content"  id="panel3">
	<h1>Create Report Logo</h1>
	<%= form_tag report_logos_path, :multipart => true, method: :post do%>
	<table>
		<thead>
			<th>Name</th>
			<th></th>
			<th></th>
			<th></th>

		</thead>
		<tbody>
			<tr>
				<td><%= text_field_tag :name, nil, placeholder: "Logo Name", class: "report_logo",required: "required" %></td>
				<td><%= label_tag(:report_logo, "Upload Logo", for: "report-logo-upload")%></td>
				<td><%= file_field_tag(:report_logo, id: "report-logo-upload") %></td>
				<td><%= button_tag "Save Logo", class: "tiny orange-buton"%></td>
			</tr>
		</tbody>
	</table>
	<% end %>


	<h1>Assign Report Logo To User</h1>
	<%= form_tag "/assign_report_logo_to_user", :multipart => true, method: :get do  %>
	<table>
		<thead>
			<th>Report Logos</th>
			<th>Users</th>
			<th></th>
		</thead>
		<tbody>
			<tr>
				<td><%= select_tag :report_logo, options_from_collection_for_select(@all_report_logos, "id", "name", params[:report_logo]), :include_blank => true%></td>
				<td><%= select_tag :user, options_from_collection_for_select(@users, "id", "email", params[:user]), :include_blank => true %></td>
				<td><%= button_tag "Assign Logo", class: "tiny orange-buton" %></td>
				<td><%= %></td>
			</tr>
		</tbody>
	</table>
	<% end %>

	<h1>Users With Logo</h1>
	<table>
		<thead>
			<th>User</th>
			<th>Logo Name</th>
			<th>Logo</th>
		</thead>
		<tbody>
			<% @users_with_logo.each do |users_with_logo| %>
			<% user_logo_id = users_with_logo.report_logo %>
			<tr>
				<td><%= users_with_logo.email%></td>
				<td><%= ReportLogo.find(user_logo_id).name%></td>
				<td><%= image_tag ReportLogo.find(user_logo_id).report_logo.url%></td>
			</tr>
			<% end %>
		</tbody>
	</table>


	<%= link_to "Back", root_path %>
	</div>
	<div class="content" id="panel4">
	</div>
</div>
